<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Access</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Config for Specific Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: '#150f1e',
                        card: '#1e1628',
                        gold: '#FFD700',
                        brand: '#00dc82', // Vibrant Green for CTA
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #150f1e;
            color: white;
            padding-bottom: 200px; /* Increased bottom padding for the sticky footer */
        }

        .timer-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Hide scrollbar for Chrome, Safari and Opera */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Modal Transitions */
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 300ms, transform 300ms; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 200ms, transform 200ms; }
        
        /* Floating Button Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- 1. Header -->
    <header class="flex items-center justify-center gap-2 py-4 border-b border-white/5 bg-[#150f1e]/95 sticky top-0 z-50 backdrop-blur-sm">
        <i data-lucide="crown" class="w-5 h-5 text-gold fill-gold"></i>
        <span class="font-extrabold tracking-widest text-gold text-sm">Private Photos And Videos</span>
    </header>

    <!-- NEW: Daily 1 Free Button (Fixed Left - Animated Loop) -->
    <button id="dailyFreeBtn" onclick="openDailyFreeModal()" class="fixed top-36 left-4 z-50 bg-rose-600 text-white px-3 py-1.5 rounded-xl shadow-[0_0_15px_rgba(225,29,72,0.4)] hover:scale-105 active:scale-95 transition-all duration-500 ease-in-out flex flex-col items-start border border-white/20 opacity-0 pointer-events-none transform translate-y-4">
        <span class="font-extrabold text-[10px] md:text-sm leading-tight">Daily 1 Free</span>
        <span class="text-[8px] md:text-[10px] font-medium opacity-80">photo / video</span>
    </button>

    <!-- Tutorial Button (Fixed Position - Visually Bottom-Right of Cover Image) -->
    <button onclick="openTutorialModal()" class="fixed top-36 right-4 z-50 bg-brand text-black px-3 py-1.5 rounded-xl shadow-[0_0_15px_rgba(0,220,130,0.4)] hover:scale-105 active:scale-95 transition-all flex flex-col items-end border border-white/20 animate-float">
        <span class="font-extrabold text-[10px] md:text-sm leading-tight">How to make payment</span>
        <span class="text-[8px] md:text-[10px] font-medium opacity-80">and watch the video</span>
    </button>

    <!-- 2. Profile Section -->
    <section class="w-full">
        <div class="w-full h-48 overflow-hidden relative">
            <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/Side_Final_Image_d046il.jpg" alt="Cover" class="w-full h-full object-cover opacity-90">
            <div class="absolute inset-0 bg-gradient-to-t from-[#150f1e] via-transparent to-transparent"></div>
        </div>

        <!-- Profile Info with Social Icons -->
        <div class="px-5 -mt-10 relative z-10 flex flex-col items-center text-center pb-6">
            <div class="flex items-center justify-center gap-5">
                <button onclick="openComingSoonModal()" class="w-10 h-10 bg-blue-600/10 hover:bg-blue-600/30 backdrop-blur-md border border-blue-500/30 rounded-full flex items-center justify-center transition-all active:scale-90 shadow-lg group">
                    <i data-lucide="facebook" class="w-5 h-5 text-blue-400 group-hover:text-blue-200 transition-colors"></i>
                </button>

                <div class="w-24 h-24 rounded-full border-4 border-[#150f1e] overflow-hidden shadow-2xl bg-[#150f1e] z-20">
                    <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/gemini-3-pro-image-preview-2k_nano-banana-pro__a_Complete_the_image_b_1_mtim7l.png" alt="Profile" class="w-full h-full object-cover">
                </div>

                <button onclick="openComingSoonModal()" class="w-10 h-10 bg-pink-600/10 hover:bg-pink-600/30 backdrop-blur-md border border-pink-500/30 rounded-full flex items-center justify-center transition-all active:scale-90 shadow-lg group">
                    <i data-lucide="instagram" class="w-5 h-5 text-pink-400 group-hover:text-pink-200 transition-colors"></i>
                </button>
            </div>
            
            <div class="mt-3 flex items-center gap-1.5">
                <h2 class="text-2xl font-bold text-white">Priya Exclusive</h2>
                <svg class="w-6 h-6 text-blue-500 fill-current" viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                </svg>
            </div>
            
            <p class="text-gray-400 text-sm font-medium mt-1">
                Private Content â€¢ <span class="text-white">32.1k Subscribers</span>
            </p>

            <!-- NEW: Private Chat & Video Call Status -->
            <div class="mt-5 flex flex-col items-center gap-1.5 animate-fade-in-up">
                <span class="text-white text-base font-bold tracking-tight">Private Chat & Video Call</span>
                <div class="flex items-center gap-2 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20 shadow-[0_0_10px_rgba(34,197,94,0.2)]">
                    <span class="relative flex h-2.5 w-2.5">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
                    </span>
                    <span class="text-green-400 text-xs font-bold uppercase tracking-wide">Online</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. Countdown Timer -->
    <section class="px-5 mt-2">
        <div class="bg-card rounded-xl p-4 border border-white/5 text-center">
            <p class="text-red-400 text-xs font-bold tracking-widest mb-3 animate-pulse uppercase">Special Price Ends In</p>
            <div class="flex justify-center gap-3" id="countdown">
                <div class="timer-box flex-1 py-3 rounded-lg">
                    <span class="block text-2xl font-bold" id="hours">02</span>
                    <span class="text-[10px] text-gray-500 uppercase">Hours</span>
                </div>
                <div class="py-3 text-xl font-bold text-gray-600">:</div>
                <div class="timer-box flex-1 py-3 rounded-lg">
                    <span class="block text-2xl font-bold" id="minutes">45</span>
                    <span class="text-[10px] text-gray-500 uppercase">Mins</span>
                </div>
                <div class="py-3 text-xl font-bold text-gray-600">:</div>
                <div class="timer-box flex-1 py-3 rounded-lg">
                    <span class="block text-2xl font-bold" id="seconds">12</span>
                    <span class="text-[10px] text-gray-500 uppercase">Secs</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Video Grid (Increased Gap for Previews) -->
    <section class="px-4 mt-12">
        <h3 class="text-lg font-bold mb-6 flex items-center gap-2">
            <i data-lucide="lock" class="w-4 h-4 text-gray-400"></i>
            Locked Content
        </h3>
        
        <!-- Increased gap-3 to gap-5 for more space between all previews -->
        <div class="grid grid-cols-2 gap-5">
            <!-- Video Preview 1 - Unmuted (Removed &muted=true&controls=false) -->
            <div class="relative w-full aspect-[3/4] rounded-xl overflow-hidden bg-black border border-white/5 shadow-lg">
                <iframe src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=01_pw8pqq&profile=cld-default&loop=true" width="640" height="360" style="height: 100%; width: 100%;" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>
            </div>

            <!-- Video Preview 2 - Unmuted (Removed &muted=true&controls=false) -->
            <div class="relative w-full aspect-[3/4] rounded-xl overflow-hidden bg-black border border-white/5 shadow-lg">
                <iframe src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=02-02_l3zzqn&profile=cld-default&loop=true" width="640" height="360" style="height: 100%; width: 100%;" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>
            </div>

            <!-- Grid Item 3 -->
            <div onclick="openModal()" class="relative aspect-[3/4] rounded-xl overflow-hidden bg-card border border-white/5 group cursor-pointer active:scale-95 transition-transform duration-200">
                <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/2frgtgC2UDdTEkEKaLzKs_yrbe78.jpg" class="w-full h-full object-cover opacity-60">
                <div class="absolute inset-0 bg-black/40 flex flex-col items-center justify-center gap-2">
                    <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/30">
                        <i data-lucide="play" class="w-5 h-5 text-white fill-white ml-1"></i>
                    </div>
                    <div class="bg-black/60 p-1.5 rounded-full backdrop-blur-sm border border-white/10">
                        <i data-lucide="lock" class="w-4 h-4 text-white"></i>
                    </div>
                </div>
            </div>

            <!-- Video Preview 4 - Blured Video -->
            <div class="relative w-full aspect-[3/4] rounded-xl overflow-hidden bg-black border border-white/5 shadow-lg">
                <!-- Added &loop=true to the src URL -->
                <iframe 
                  src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=Blured_Riding_01_qi5kxg&profile=cld-default&loop=true" 
                  width="640" 
                  height="360" 
                  style="height: 100%; width: 100%;" 
                  allow="autoplay; fullscreen; encrypted-media; picture-in-picture" 
                  allowfullscreen 
                  frameborder="0">
                </iframe>
            </div>
        </div>
    </section>

    <!-- 5. Sticky Payment Footer -->
    <div class="fixed bottom-0 left-0 w-full bg-[#150f1e] border-t border-white/10 p-4 pb-8 z-50 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]">
        <div class="max-w-md mx-auto flex flex-col gap-3">
            <button onclick="openAccessModal()" class="w-full bg-brand hover:bg-green-400 text-black font-extrabold text-lg py-4 rounded-xl shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2">
                <span>Unlock Full Access</span>
                <i data-lucide="arrow-right" class="w-5 h-5"></i>
            </button>
            <div class="flex flex-col items-center gap-2 mt-1">
                <div class="flex justify-center items-center gap-3">
                    <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/v1766659724/Whisk_142959baa717a53b4c940046e81aa8a5dr_hoyare.png" class="h-12 w-auto rounded bg-white p-0.5 object-contain" alt="Payment Method">
                    <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/v1766659723/Whisk_06493a0eb6218b19b0a49b0d4191f3c9dr_oerutp.png" class="h-12 w-auto rounded bg-white p-0.5 object-contain" alt="Payment Method">
                    <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/v1766659724/Whisk_a2c98a439e456029dd0459cdfe8d7b6fdr_s3xizd.png" class="h-12 w-auto rounded bg-white p-0.5 object-contain" alt="Payment Method">
                    <img src="https://res.cloudinary.com/dh8bheu7j/image/upload/v1766659727/Whisk_3996ed2a167b554b0b54da3be61e4b08dr_ca7hb2.png" class="h-12 w-auto rounded bg-white p-0.5 object-contain" alt="Payment Method">
                </div>
                <span class="text-[10px] text-gray-500">100% Secure Payment</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="paymentModal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm hidden transition-opacity duration-300 opacity-0" onclick="closeModal(event)">
        <div class="bg-[#1e1628] border border-white/10 p-6 rounded-2xl max-w-sm w-[85%] text-center shadow-2xl transform scale-95 transition-transform duration-300" id="modalContent" onclick="event.stopPropagation()">
            <div class="w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/20">
                <i data-lucide="lock" class="w-8 h-8 text-red-500"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Locked Content</h3>
            <p class="text-gray-400 mb-6 text-sm leading-relaxed">To watch this video you have to complete the payment.</p>
            <div class="space-y-3">
                <button onclick="closeModal(); setTimeout(openAccessModal, 300)" class="w-full bg-brand hover:bg-green-400 text-black font-extrabold py-3 rounded-xl transition-all active:scale-95 shadow-lg flex items-center justify-center gap-2">
                    <span>Unlock Full Access</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
                <button onclick="closeModal()" class="w-full bg-white/5 hover:bg-white/10 border border-white/10 text-white font-medium py-3 rounded-xl transition-all active:scale-95">Close</button>
            </div>
        </div>
    </div>

    <div id="accessModal" class="fixed inset-0 z-[70] flex items-center justify-center bg-black/90 backdrop-blur-md hidden transition-opacity duration-300 opacity-0" onclick="closeAccessModal(event)">
        <div class="bg-[#1e1628] border border-brand/20 p-6 rounded-2xl max-w-sm w-[90%] shadow-2xl transform scale-95 transition-transform duration-300 relative" id="accessModalContent" onclick="event.stopPropagation()">
            <button onclick="closeAccessModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white"><i data-lucide="x" class="w-5 h-5"></i></button>
            <div class="text-center mb-6">
                <div class="w-12 h-12 bg-brand/10 rounded-full flex items-center justify-center mx-auto mb-3 border border-brand/20"><i data-lucide="user-check" class="w-6 h-6 text-brand"></i></div>
                <h3 class="text-xl font-bold text-white">Final Step</h3>
                <p class="text-gray-400 text-xs mt-1">Enter your name to complete payment</p>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-medium text-gray-400 mb-1.5 ml-1 uppercase">Your Name</label>
                    <input type="text" id="payerName" placeholder="e.g. Rahul Sharma" class="w-full bg-black/40 border border-white/10 text-white rounded-xl px-4 py-3 focus:outline-none focus:border-brand/50 focus:ring-1 focus:ring-brand/50 transition-all">
                </div>
                <button id="payNowBtn" onclick="processPayment()" disabled class="w-full bg-brand disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed text-black font-extrabold text-lg py-3.5 rounded-xl transition-all flex items-center justify-center gap-2">
                    <span>Pay Now</span><i data-lucide="credit-card" class="w-5 h-5"></i>
                </button>
                <p class="text-[10px] text-center text-gray-500">Secure transaction via UPI</p>
            </div>
        </div>
    </div>

    <div id="comingSoonModal" class="fixed inset-0 z-[80] flex items-center justify-center bg-black/80 backdrop-blur-sm hidden transition-opacity duration-300 opacity-0" onclick="closeComingSoonModal(event)">
        <div class="bg-[#1e1628] border border-white/10 p-8 rounded-2xl max-w-[300px] w-[85%] text-center shadow-2xl transform scale-95 transition-transform duration-300 relative overflow-hidden" id="comingSoonContent" onclick="event.stopPropagation()">
            <div class="absolute inset-0 bg-brand/5 blur-3xl rounded-full scale-150 animate-pulse"></div>
            <div class="relative z-10">
                <div class="w-20 h-20 bg-gradient-to-tr from-brand to-cyan-400 rounded-full flex items-center justify-center mx-auto mb-5 shadow-lg animate-bounce"><i data-lucide="rocket" class="w-10 h-10 text-white"></i></div>
                <h3 class="text-2xl font-bold text-white mb-2 tracking-tight uppercase">Coming Soon</h3>
                <p class="text-gray-400 mb-6 text-sm">Stay tuned.</p>
                <button onclick="closeComingSoonModal()" class="w-full bg-white/10 hover:bg-white/20 border border-white/10 text-white font-medium py-2.5 rounded-xl transition-all active:scale-95">Okay</button>
            </div>
        </div>
    </div>

    <!-- NEW: Tutorial Modal (Reduced Size) -->
    <div id="tutorialModal" class="fixed inset-0 z-[90] flex items-center justify-center bg-black/90 backdrop-blur-md hidden transition-opacity duration-300 opacity-0" onclick="closeTutorialModal(event)">
        <div class="bg-[#1e1628] border border-brand/30 p-5 rounded-2xl max-w-[280px] w-[85%] shadow-2xl transform scale-95 transition-transform duration-300 relative" id="tutorialContent" onclick="event.stopPropagation()">
            <button onclick="closeTutorialModal()" class="absolute -top-3 -right-3 bg-red-500 text-white rounded-full p-1.5 shadow-lg hover:bg-red-600 transition-colors z-50">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
            <h3 class="text-lg font-bold text-white text-center mb-4 leading-snug">
                Watch the video carefully to make the payment and get all <span class="text-brand">Private Photos And Videos</span>
            </h3>
            <!-- 3:4 Video Container - Unmuted (Removed &muted=true&controls=false) -->
            <div class="relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden border border-white/10 shadow-inner mb-4">
                <iframe src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=01_pw8pqq&profile=cld-default" width="100%" height="100%" style="position: absolute; top:0; left:0; width:100%; height:100%;" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>
            </div>
            <p class="text-xs text-center text-gray-500">Tutorial Guide</p>
        </div>
    </div>

    <!-- NEW: Daily Free Content Modal -->
    <div id="dailyFreeModal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md hidden transition-opacity duration-300 opacity-0" onclick="closeDailyFreeModal(event)">
        <!-- Changed max-w-[320px] to max-w-lg for wider horizontal look on desktop, added max-h for mobile scroll -->
        <div class="bg-[#1e1628] border border-rose-500/30 p-5 rounded-2xl max-w-lg w-[95%] max-h-[85vh] overflow-y-auto scrollbar-hide shadow-2xl transform scale-95 transition-transform duration-300 relative" id="dailyFreeContent" onclick="event.stopPropagation()">
            <!-- Fixed Close Button: Moved inside the padding (top-3 right-3) to ensure visibility on all screens -->
            <button onclick="closeDailyFreeModal()" class="absolute top-3 right-3 bg-white/10 text-white hover:bg-white/20 rounded-full p-1.5 shadow-lg backdrop-blur-sm transition-colors z-50">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
            
            <h3 class="text-lg font-bold text-white text-center mb-4 mt-2">Daily Free Content</h3>
            
            <!-- Changed grid-cols-3 to grid-cols-1 for mobile (vertical stack), md:grid-cols-3 for desktop -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <!-- Preview 1: Clear / Unlocked - Aspect [3/4] -->
                <div class="aspect-[3/4] bg-gray-800 rounded-lg relative overflow-hidden border border-brand/50 group shadow-lg shadow-brand/10 transition-transform active:scale-95" id="dailySlot1">
                    <!-- Javascript will insert content here -->
                </div>

                <!-- Preview 2: Content injected via JS - Aspect [3/4] -->
                <div class="aspect-[3/4] bg-gray-800 rounded-lg relative overflow-hidden border border-white/5 group" id="dailySlot2">
                    <!-- Javascript will insert content here -->
                </div>

                <!-- Preview 3: Content injected via JS - Aspect [3/4] -->
                <div class="aspect-[3/4] bg-gray-800 rounded-lg relative overflow-hidden border border-white/5 group" id="dailySlot3">
                    <!-- Javascript will insert content here -->
                </div>
            </div>
            
            <!-- Footer Text -->
            <p class="text-[10px] text-center text-gray-500 mt-4">Check back tomorrow for more free content</p>
        </div>
    </div>

    <!-- NEW: Expanded Content Modal (Lightbox) -->
    <div id="expandedModal" class="fixed inset-0 z-[110] flex items-center justify-center bg-black/95 backdrop-blur-xl hidden transition-opacity duration-300 opacity-0" onclick="closeExpandedModal()">
        <!-- Close Button -->
        <button onclick="closeExpandedModal()" class="absolute top-4 right-4 bg-white/10 text-white hover:bg-white/20 rounded-full p-2 shadow-lg transition-colors z-50">
            <i data-lucide="x" class="w-6 h-6"></i>
        </button>

        <!-- Content Container (Auto width/height based on content) -->
        <div id="expandedContent" class="relative max-w-[95vw] max-h-[90vh] overflow-hidden rounded-lg shadow-2xl flex items-center justify-center" onclick="event.stopPropagation()">
            <!-- Content injected via JS -->
        </div>
    </div>

    <!-- Scripts -->
    <script>
        function initIcons() { if (typeof lucide !== 'undefined') lucide.createIcons(); }

     
     
     
     
     
     
     
     
     
        // --- Configuration: Content List ---
        const dailyContentList = [
            "https://res.cloudinary.com/dh8bheu7j/image/upload/01_apgivg.jpg",
            `<iframe src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=05_i4shvj&profile=cld-default" width="100%" height="100%" style="height: 100%; width: 100%;" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>`,
            "https://res.cloudinary.com/dh8bheu7j/image/upload/04_oayot6.jpg",
            "https://res.cloudinary.com/dh8bheu7j/image/upload/01_wauvol.png",
            `<iframe src="https://player.cloudinary.com/embed/?cloud_name=dh8bheu7j&public_id=02_tvytbl&profile=cld-default" width="100%" height="100%" style="height: 100%; width: 100%;" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>`
        ];

        // --- Logic: Render Content into Slots ---
        function renderDailyContent(date) {
            // Modified: Calculate Global Minute (Total minutes since Epoch)
            // This ensures the content index changes every 60 seconds
            const globalMinute = Math.floor(date.getTime() / (1000 * 60));
            
            const len = dailyContentList.length;
            
            // Calculate indices based on global minute, looping automatically
            const idx1 = globalMinute % len;
            const idx2 = (globalMinute + 1) % len;
            const idx3 = (globalMinute + 2) % len;

            // Update DOM
            updateSlot('dailySlot1', dailyContentList[idx1], false);
            updateSlot('dailySlot2', dailyContentList[idx2], true);
            updateSlot('dailySlot3', dailyContentList[idx3], true);
        }

        function updateSlot(slotId, content, isLocked) {
            const slot = document.getElementById(slotId);
            if (!slot) return;

            let contentHTML = '';
            // Blur class for locked items
            const blurClass = isLocked ? 'blur-[4px] opacity-50 scale-110 pointer-events-none' : 'object-cover';
            
            if (content.trim().startsWith('<iframe')) {
                // For 3:4 aspect ratio boxes, we need to ensure the iframe fills it
                contentHTML = `<div class="w-full h-full ${blurClass}">${content}</div>`;
            } else {
                contentHTML = `<img src="${content}" class="w-full h-full object-cover ${blurClass}" alt="Daily Content">`;
            }

            let overlayHTML = '';
            if (!isLocked) {
                // Unlocked Badge
                // Added: "absolute inset-0 z-10" div. This transparent layer sits ON TOP of the video/image.
                // It captures the click event so the iframe doesn't swallow it.
                overlayHTML = `
                    <div class="absolute bottom-0 left-0 w-full bg-brand/90 py-0.5 text-center z-20 pointer-events-none">
                        <span class="text-[8px] font-bold text-black uppercase tracking-wider">Unlocked</span>
                    </div>
                    <div class="absolute inset-0 z-10 cursor-pointer bg-transparent"></div>
                `;
                
                // Add Click Event to Open Expanded View
                slot.onclick = function() {
                    openExpandedModal(content);
                };
                slot.classList.add('cursor-pointer');
                
            } else {
                // Locked Overlay - Updated text location
                overlayHTML = `
                    <div class="absolute inset-0 flex flex-col items-center justify-center text-center p-2 z-20">
                        <div class="bg-black/60 p-1.5 rounded-full border border-white/20 backdrop-blur-sm mb-1.5">
                            <i data-lucide="lock" class="w-3.5 h-3.5 text-white/80"></i>
                        </div>
                        <p class="text-[8px] text-white/80 font-medium leading-tight">Check back tomorrow<br>for more free content</p>
                    </div>`;
                
                slot.onclick = null;
                slot.classList.remove('cursor-pointer');
            }

            slot.innerHTML = contentHTML + overlayHTML;
            
            // Re-initialize icons
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        // --- Simplified Time Fetcher (System Time) ---
        function fetchServerDate() {
            // Using User's Device Time as requested to fix loading delay
            const systemDate = new Date();
            renderDailyContent(systemDate);
        }

        // --- Expanded Modal Logic ---
        function openExpandedModal(content) {
            const container = document.getElementById('expandedContent');
            let html = '';
            
            if (content.trim().startsWith('<iframe')) {
                // Wrap iframe for sizing
                html = `<div class="w-full h-full min-w-[300px] md:min-w-[600px] aspect-video">${content}</div>`;
            } else {
                html = `<img src="${content}" class="max-w-full max-h-[85vh] object-contain mx-auto" alt="Expanded Content">`;
            }
            
            container.innerHTML = html;
            toggleModal('expandedModal', 'expandedContent', true);
        }

        function closeExpandedModal() {
            toggleModal('expandedModal', 'expandedContent', false);
        }

        const nameInput = document.getElementById('payerName');
        const payBtn = document.getElementById('payNowBtn');
        if (nameInput && payBtn) {
            nameInput.addEventListener('input', function() {
                if (this.value.trim().length > 0) {
                    payBtn.removeAttribute('disabled');
                    payBtn.classList.remove('opacity-50');
                } else {
                    payBtn.setAttribute('disabled', 'true');
                    payBtn.classList.add('opacity-50');
                }
            });
        }

        function openComingSoonModal() { toggleModal('comingSoonModal', 'comingSoonContent', true); }
        function closeComingSoonModal() { toggleModal('comingSoonModal', 'comingSoonContent', false); }
        function openAccessModal() { toggleModal('accessModal', 'accessModalContent', true); }
        function closeAccessModal() { toggleModal('accessModal', 'accessModalContent', false); if (nameInput) nameInput.value = ''; }
        function openModal() { toggleModal('paymentModal', 'modalContent', true); }
        function closeModal() { toggleModal('paymentModal', 'modalContent', false); }
        function openTutorialModal() { toggleModal('tutorialModal', 'tutorialContent', true); }
        function closeTutorialModal() { toggleModal('tutorialModal', 'tutorialContent', false); }
        
        // Updated Open Daily Free Modal
        function openDailyFreeModal() { 
            toggleModal('dailyFreeModal', 'dailyFreeContent', true);
            fetchServerDate();
        }
        function closeDailyFreeModal() { toggleModal('dailyFreeModal', 'dailyFreeContent', false); }

        function toggleModal(id, contentId, open) {
            const m = document.getElementById(id), c = document.getElementById(contentId);
            if (!m || !c) return;
            if (open) {
                m.classList.remove('hidden');
                setTimeout(() => { m.classList.remove('opacity-0'); c.classList.replace('scale-95', 'scale-100'); }, 10);
            } else {
                m.classList.add('opacity-0'); c.classList.replace('scale-100', 'scale-95');
                setTimeout(() => m.classList.add('hidden'), 300);
            }
        }

        function processPayment() {
            const name = nameInput ? nameInput.value.trim() : '';
            if (!name) return;
            window.location.href = `upi://pay?pa=hricheak123-1@okaxis&am=1&tn=${encodeURIComponent(name)}%20send%20you%20a%20payment&cu=INR`;
        }

        function startTimer(duration, h, m, s) {
            let t = duration;
            setInterval(() => {
                let hrs = parseInt(t / 3600, 10), mins = parseInt((t % 3600) / 60, 10), secs = parseInt(t % 60, 10);
                if (h) h.textContent = hrs < 10 ? "0" + hrs : hrs;
                if (m) m.textContent = mins < 10 ? "0" + mins : mins;
                if (s) s.textContent = secs < 10 ? "0" + secs : secs;
                if (--t < 0) t = duration;
            }, 1000);
        }

        // Logic for Daily Free Button Loop
        function startDailyFreeLoop() {
            const btn = document.getElementById('dailyFreeBtn');
            if (!btn) return;

            const loop = () => {
                setTimeout(() => {
                    btn.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-4');
                    btn.classList.add('translate-y-0');
                    setTimeout(() => {
                        btn.classList.add('opacity-0', 'pointer-events-none', 'translate-y-4');
                        btn.classList.remove('translate-y-0');
                        loop(); 
                    }, 4000); 
                }, 4000); 
            };
            loop();
        }

        window.addEventListener('load', () => {
            initIcons();
            startTimer((3 * 3600) + (45 * 60), document.querySelector('#hours'), document.querySelector('#minutes'), document.querySelector('#seconds'));
            startDailyFreeLoop();
        });
        document.addEventListener('DOMContentLoaded', initIcons);
    </script>
</body>
</html>
